<ui:composition  xmlns="http://www.w3.org/1999/xhtml" 
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:EXXO-START="http://xmlns.jcp.org/jsf/composite/EXXO-START"
                 template="./mainTemplate.xhtml" 
                 xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="top">
        <EXXO-START:top-menu page="insert-class"></EXXO-START:top-menu>
    </ui:define>
    <ui:define name="head">
        <EXXO-START:head title="Редактор фото"></EXXO-START:head>
    </ui:define>
    <ui:define name="head-bot"></ui:define>
    <ui:define name="content">
        <table id="inner" style="width: 100%;"><tr><td style="width: 50px;"></td>
                <td>
                    <h:panelGroup rendered="#{photoBean.photo}">
                        <h:form id="imgupdater" prependId="false">
                            <img src="ImgLoader?t=#{empBean.timer}" id="image" />
                            <h:inputHidden id="width" value="#{photoBean.width}"></h:inputHidden>
                            <h:inputHidden id="height"  value="#{photoBean.height}"></h:inputHidden>
                            <h:inputHidden id="x" value="#{photoBean.x}"></h:inputHidden>
                            <h:inputHidden id="y" value="#{photoBean.y}"></h:inputHidden>
                            <h:panelGrid columns="3" id="butTable">
                                <h:commandButton value="Назад" action="emp">
                                    <f:param name="edit" value="1"></f:param>
                                </h:commandButton>
                                <h:commandButton value="Кадрировать" actionListener="#{photoBean.updateImage()}"></h:commandButton>
                                <h:commandButton value="Продолжить" action="empfin"></h:commandButton>
                            </h:panelGrid>
                        </h:form>
                    </h:panelGroup>
                    <h:panelGroup id="error" rendered="#{not photoBean.photo}">
                        #{empBean.error}
                    </h:panelGroup>  
                    <h:form rendered="#{not photoBean.photo}" prependId="false">
                        <h:panelGrid columns="2" rendered="#{not photoBean.photo}" id="butTable1">
                            <h:commandButton value="Назад" action="emp">
                                <f:param name="edit" value="1"></f:param>
                            </h:commandButton>
                            <h:commandButton value="Продолжить" action="empfin"></h:commandButton>   
                        </h:panelGrid>  
                    </h:form>
                    <h:outputScript library="scripts" name="photo.js" target="body"></h:outputScript>
                    <h:outputStylesheet library="css" name="photo.css"></h:outputStylesheet></td>
                <td style="width: 50px;"></td></tr></table>
    </ui:define>
</ui:composition>
