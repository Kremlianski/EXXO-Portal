<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title></title>

<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.8.1/build/assets/skins/sam/skin.css">
<!-- Utility Dependencies -->
<script src="http://yui.yahooapis.com/2.8.1/build/yahoo-dom-event/yahoo-dom-event.js"></script> 

<script src="http://yui.yahooapis.com/2.8.1/build/element/element-min.js"></script> 
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script src="http://yui.yahooapis.com/2.8.1/build/container/container_core-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.1/build/menu/menu-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.1/build/button/button-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script src="http://yui.yahooapis.com/2.8.1/build/editor/editor-min.js"></script>

<script type="text/javascript" charset="utf-8" src="alloy/build/yui/yui-min.js"></script> 
<script type="text/javascript" charset="utf-8" src="alloy/build/aui-base/aui-base-debug.js"></script> 

</head>
<body class="yui-skin-sam">
<form action="text">
<input type="hidden" name="user" id="user" value="10">
<input type="hidden" name="id" id="id" value="text_1">
<input type="text" name="title" id="title">
<textarea name="msgpost" id="msgpost" cols="50" rows="10">
    
</textarea>
<input type="submit" id='submit' value="Сохранить изменения"/></form>
<script>
AUI().ready('aui-node', 'aui-io-request', 'json-parse',  function(A) {
var data;
var title='';
var text='';
var id = 'text_3';
A.one('#id').setAttribute('value',id);
var io=A.io.request('textOut', {
			dataType: 'text',
			cache: false,
			data: {
			user: '10',
			id: id
			
		},
		method: 'get',

			on: {
				success: function(event, id, xhr) {

				  var Datas=this.get('responseData');

				  try {
				  data = A.JSON.parse(Datas);
				  title=data[0];
				  text=data[1];
				  }
				  catch (e) {
				  alert("Invalid product data");
				      }   
A.one('#msgpost').html(text);
A.one('#title').setAttribute('value',title);
				  editorPut();
				}	
			    }
});

function editorPut(){

var myEditor = new YAHOO.widget.Editor('msgpost', {
    height: '300px',
    width: '600px',
    dompath: true, //Turns on the bar at the bottom
    animate: true //Animates the opening, closing and moving of Editor windows
});
myEditor.on('toolbarLoaded', function() {
this.toolbar.set('titlebar',title);
});
myEditor.render();
}
A.one('#submit').on('click',function(e){YAHOO.widget.EditorInfo.saveAll();});


});
</script>

</body>
</html>